import { convertDate } from 'utilities/helpers/dateTime';
import combineWithPersonalisedData from './combineWithPersonalisedData';

const mockData = {
  episodes: [
    {
      audioUrl: 'https://traffic.omny.fm/d/clips/820f09cf-2ace-4180-a92d-aa4c0008f5fb/a4d1558e-2f5d-4650-a21f-aa4c003f9fce/c18b1ac2-a202-40b9-9f58-aa4c0042c5c4/audio.mp3',
      contentRating: 'Explicit',
      description: "The ARIA Awards first kicked off in 1987. Elton John was the Master of Ceremonies, and John Farnham's Whispering Jack album won nearly everything.",
      durationSeconds: 1804.957,
      episode: 1,
      episodeType: 'Full',
      id: 'c18b1ac2-a202-40b9-9f58-aa4c0042c5c4',
      playlistIds: ['a202c0e7-19e1-4f41-a9df-aa4c003f9fd3'],
      programId: 'a4d1558e-2f5d-4650-a21f-aa4c003f9fce',
      publishedAudioSizeInBytes: 28937910,
      publishedUtc: '2017-11-23T21:05:00Z',
      season: 1,
      show: { shareUrl: null, id: 'a202c0e7-19e1-4f41-a9df-aa4c003f9fd3', tier: 1, showType: 'serial', name: 'From The Inside With Peter Rix' },
      slug: 'the-aria-awards-from-then-to-now-part-1-a-conversa',
      state: 'Ready',
      tags: ['From The Inside with Peter Rix', 'Peter Rix'],
      title: 'The ARIA awards from then to now - pt 2:  A conversation with Phillip Mortlock and Mark Pope',
    }, {
      audioUrl: 'https://chtbl.com/track/CFD1E3/traffic.omny.fm/d/clips/820f09cf-2ace-4180-a92d-aa4c0008f5fb/e94f617f-f19c-4c19-bb91-ac720056a45b/42803eb0-0d42-414a-a6d2-ad0801529129/audio.mp3',
      contentRating: 'Unrated',
      description: 'Also today the government says it won’t purchase the Johnson and Johnson vaccine over concerns it’s too similar to AstraZeneca.',
      durationSeconds: 882.26,
      episode: 100,
      episodeType: 'Full',
      id: '42803eb0-0d42-414a-a6d2-ad0801529129',
      playlistIds: ['897c082e-680c-4182-940e-ac72005bba75'],
      programId: 'e94f617f-f19c-4c19-bb91-ac720056a45b',
      publishedAudioSizeInBytes: 14169528,
      publishedUtc: '2021-04-12T20:36:12Z',
      season: 1,
      show: { shareUrl: null, name: 'Your Morning Agenda with Natarsha Belling', playlistCategories: Array(1), colourLight: '#1ea3bf' },
      slug: 'princes-william-and-harry-release-separate-stateme',
      state: 'Ready',
      tags: [],
      title: 'Princes William and Harry release separate statements paying tribute to their beloved grandfather Prince Philip',
    },
  ],

  lastSeen: '',
  sessionInfo: {
    '0ebec589-96dc-4671-8f66-ac610005bd23': {
      durationSeconds: 0,
      id: '0ebec589-96dc-4671-8f66-ac610005bd23',
      isMarkedAsPlayed: false,
      playedDateTime: '2021-01-14T01:30:43Z',
      playheadPosition: 20,
      progress: Infinity,
      season: 1,
      showId: '2ec9760c-54da-4317-9f8d-ac3700572b35',
      showSlug: 'zero-waste-baby-with-veronica-milsom',
      slug: 'marie-kondo-ing-our-toy-collection',
    },
    '01f16433-3fbf-43f3-9c55-ace0005c387c': {
      durationSeconds: 2787.239184,
      id: '01f16433-3fbf-43f3-9c55-ace0005c387c',
      isMarkedAsPlayed: false,
      playedDateTime: '2021-03-04T08:08:46Z',
      playheadPosition: 581.281916,
      progress: 0.20855114241246978,
      season: null,
      showId: '07c02520-ed68-40fa-8858-ac8e004ee9b2',
      showSlug: 'carrie-and-tommy',
      slug: 'tommy-reconnects-with-an-old-international-flame-t',
    },
  },
};

describe('', () => {
  test('', () => {
    const { episodes, sessionInfo, lastSeen } = mockData;
    const result = combineWithPersonalisedData(episodes, sessionInfo, lastSeen);
    const expecting = [{
      audioUrl: 'https://traffic.omny.fm/d/clips/820f09cf-2ace-4180-a92d-aa4c0008f5fb/a4d1558e-2f5d-4650-a21f-aa4c003f9fce/c18b1ac2-a202-40b9-9f58-aa4c0042c5c4/audio.mp3',
      contentRating: 'Explicit',
      description: "The ARIA Awards first kicked off in 1987. Elton John was the Master of Ceremonies, and John Farnham's Whispering Jack album won nearly everything.",
      durationSeconds: 1804.957,
      episode: 1,
      episodeType: 'Full',
      id: 'c18b1ac2-a202-40b9-9f58-aa4c0042c5c4',
      info: 'Ep 1',
      isCompleted: false,
      isNewEpisode: null,
      playlistIds: ['a202c0e7-19e1-4f41-a9df-aa4c003f9fd3'],
      programId: 'a4d1558e-2f5d-4650-a21f-aa4c003f9fce',
      publishedAudioSizeInBytes: 28937910,
      publishedDate: convertDate('2017-11-23T21:05:00Z'),
      publishedUtc: '2017-11-23T21:05:00Z',
      season: 1,
      show: { id: 'a202c0e7-19e1-4f41-a9df-aa4c003f9fd3', name: 'From The Inside With Peter Rix', shareUrl: null, showType: 'serial', tier: 1 },
      slug: 'the-aria-awards-from-then-to-now-part-1-a-conversa',
      state: 'Ready',
      tags: [
        'From The Inside with Peter Rix',
        'Peter Rix',
      ],
      time: 0,
      title: 'The ARIA awards from then to now - pt 2:  A conversation with Phillip Mortlock and Mark Pope',
    },
    { audioUrl: 'https://chtbl.com/track/CFD1E3/traffic.omny.fm/d/clips/820f09cf-2ace-4180-a92d-aa4c0008f5fb/e94f617f-f19c-4c19-bb91-ac720056a45b/42803eb0-0d42-414a-a6d2-ad0801529129/audio.mp3',
      contentRating: 'Unrated',
      description: 'Also today the government says it won’t purchase the Johnson and Johnson vaccine over concerns it’s too similar to AstraZeneca.',
      durationSeconds: 882.26,
      episode: 100,
      episodeType: 'Full',
      id: '42803eb0-0d42-414a-a6d2-ad0801529129',
      info: 'Ep 100',
      isCompleted: false,
      isNewEpisode: null,
      playlistIds: ['897c082e-680c-4182-940e-ac72005bba75'],
      programId: 'e94f617f-f19c-4c19-bb91-ac720056a45b',
      publishedAudioSizeInBytes: 14169528,
      publishedDate: convertDate('2021-04-12T20:36:12Z'),
      publishedUtc: '2021-04-12T20:36:12Z',
      season: 1,
      show: { colourLight: '#1ea3bf', name: 'Your Morning Agenda with Natarsha Belling', playlistCategories: [undefined], shareUrl: null },
      slug: 'princes-william-and-harry-release-separate-stateme',
      state: 'Ready',
      tags: [],
      time: 0,
      title: 'Princes William and Harry release separate statements paying tribute to their beloved grandfather Prince Philip',
    }];
    expect(result).toEqual(expecting);
  });
});
